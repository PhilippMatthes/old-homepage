{% load staticfiles %}

<div id="siri-app-wrapper" class="bg-gradient-siri" style="height: 5000px">

    <div class="container text-center text-white" style="position: sticky; top: 1rem; width: 100%; height: 700px;">
        <div class="iphone-lockscreen" id="scroll-down-to-unlock" style="padding-top: 90px; font-family: 'Roboto', sans-serif; font-weight: 300; font-size: 10px; opacity: 0;">
            <i class="fas fa-lock"></i> scroll down to unlock
        </div>
        <div class="iphone-lockscreen" style="font-family: 'Roboto', sans-serif; font-weight: 300; font-size: 60px">{% now "G:i" %}</div>
        <div class="iphone-lockscreen" style="font-family: 'Roboto', sans-serif; font-weight: 300; font-size: 15px">{% now "jS \o\f F Y" %}</div>
        <div class="iphone-lockscreen" id="unlock-bar" style="height: 5px; width: 130px; border-radius: 5px; background-color: white; position: absolute; bottom: 35px; left: 50%; transform: translate(-50%, 0);"></div>
        <img id="iphone" style="position: absolute; top: 10px; left: 50%; height: 700px; transform: translate(-50%, 0)" src="{% static 'img/iphone.png' %}">
    </div>

</div>

<script>
    document.addEventListener("DOMContentLoaded", function(event) {

        anime({
            targets: '#scroll-down-to-unlock',
            opacity: [0.0, 1.0],
            duration: 1000,
            easing: 'easeInOutSine',
            delay: 200,
        })

        anime({
            targets:'#unlock-bar',
            translateY: [0, -5, 0],
            loop: true,
            duration: 3000,
            easing: 'easeInOutSine',
        })

        var timeline = anime.timeline({
          easing: 'easeInOutSine',
          duration: 750,
          autoplay: false,
        });

        timeline
            .add({
                targets: '.iphone-lockscreen',
                opacity: [1.0, 0.0],
                duration: 50
            })
            .add({
                targets: '#iphone',
                scale: [1.0, 2.0],
                opacity: [1.0, 0.0],
            })

        function onScroll() {
            var element = $("#siri-app-wrapper");
            var top = element.offset().top;
            var height = element.innerHeight();
            var deltaTop = window.scrollY - top;
            var percentage = Math.min(Math.max(deltaTop, 0) / height, 1);

            timeline.seek(timeline.duration * percentage);
        }

        window.addEventListener("scroll", onScroll);
    });
</script>
